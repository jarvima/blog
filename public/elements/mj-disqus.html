<link rel="import" href="/bower_components/polymer/polymer.html">

<dom-module id="mj-disqus">

  <template>
	<div id="disqus_thread"></div>
  </template>

</dom-module>

<script>

  Polymer({

    is: 'mj-discus',

    properties: {

      loaded: {
    	type: Boolean,
		value: false
      }

    },

    set: function(identifier, url) {
    	if (!this.loaded) {
    		var d = document, s = d.createElement('script');

    		s.src = '//mjarvis.disqus.com/embed.js';

    		s.setAttribute('data-timestamp', +new Date());
    		(d.head || d.body).appendChild(s);
    		this.loaded = true;
    	}

    	DISQUS.reset({
   		  reload: true,
   		  config: function () {
   		    this.page.identifier = identifier;
   		    this.page.url = url;
   		  }
   		});
    },

  });

</script>

<script>
/**
* RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
* LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL; // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');

s.src = '//mjarvis.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
